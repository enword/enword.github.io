<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="./favicon.svg" type="image/x-icon" />
    <title>enWord</title>
    <style>
      :root {
        --title-color: #b6a2f9;
        --bg-color: linear-gradient(180deg, rgba(41, 29, 39, 1) 0%, rgba(32, 31, 36, 1) 100%);
        --gradient-color: linear-gradient(128.87deg, #9780e5 14.05%, #53ceda 89.3%);
      }

      * {
        padding: 0;
        margin: 0;
        color: #ffffff;
        text-align: center;
        border-radius: 1.2svh;
        font-family: sans-serif;
        font-weight: 900;
      }

      *:focus {
        -webkit-tap-highlight-color: transparent;
      }

      *:active {
        -webkit-tap-highlight-color: transparent;
      }

      html {
        width: 100%;
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      body {
        width: 100%;
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        overflow-x: hidden;
        background: var(--bg-color);
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }

      #wrap {
        width: 97%;
        height: 97%;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
      }

      #navTop {
        width: 100%;
        height: 7svh;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: row;
        gap: 2svh;
      }

      #navTop div {
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        background: #372237;
        font-size: 3svh;
        aspect-ratio: 2.4/1;
      }

      #navBottom {
        width: 100%;
        height: 15.9svh;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: row;
        gap: 2svh;
      }

      #navBottom div {
        display: flex;
        height: 100%;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        font-size: 4svh;
        aspect-ratio: 1/1;
      }

      #navTop > div:active,
      #navModes > div:active,
      #navBottom > div:active {
        opacity: 0.5;
      }

      #buttonShowTranslation > div:active {
        opacity: 0.5;
      }

      #buttonAddWord {
        background: #372237;
      }

      #buttonCountWord {
        background: transparent;
        box-shadow: inset 0 0 0 0.3svh var(--title-color);
      }

      #buttonNextWord {
        background: #553674;
      }

      #buttonShowTranslation {
        flex: 1;
        width: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-content: center;
        background: transparent;
      }

      #div1 {
        flex: 1;
        width: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      #div2 {
        flex: 1;
        width: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      #div3 {
        flex: 1;
        width: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      #div1 span,
      #div2 span,
      #div3 span {
        height: 100%;
        font-size: 7svh;
        line-height: 1.2;
        overflow-wrap: anywhere;
        width: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
      }

      #div1 span {
        background: var(--gradient-color);
        background-clip: text;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }

      #div3 span {
        color: #ffffff80;
      }

      .small-font {
        font-size: 5svh !important;
      }

      .reverseBG {
        background: #ff5400 !important;
      }

      #buttonDownload {
        display: none;
        justify-content: center;
        align-items: center;
        background: transparent !important;
        box-shadow: inset 0 0 0 0.3svh var(--title-color);
      }

      #achievement40Words {
        display: none;
        position: absolute;
        left: -10px;
        top: 8%;
        padding: 10px;
        background: #007905;
        font-size: 4svh;
        transform: rotate(20deg);
        text-shadow: 2px 2px 2px #0000005c;
        justify-content: center;
        align-items: center;
        transition: 1s;
        aspect-ratio: 1/1;
      }

      #navModes {
        position: fixed;
        bottom: 0;
        display: grid;
        grid-template-columns: 25svh 25svh;
        justify-content: center;
        align-content: center;
        gap: 3svh;
        transform: translateY(100%);
        backdrop-filter: blur(7px);
        background: #1d181ebd;
        width: 70svh;
        height: 90svh;
        z-index: 1000;
      }

      .navVisible {
        transform: translateY(0%) !important;
      }

      #navModes > div {
        display: flex;
        justify-content: center;
        align-items: center;
        overflow-wrap: break-word;
        aspect-ratio: 2/1;
        font-size: 3svh;
        background: #372237;
      }
    </style>
  </head>

  <body>
    <div id="wrap">
      <div id="navTop">
        <div id="buttonNav">1</div>
        <div id="buttonDownload">DL</div>
        <div id="buttonReverse">+</div>
      </div>
      <div id="buttonShowTranslation">
        <div id="div1"><span></span></div>
        <div id="div2"><span></span></div>
        <div id="div3"><span></span></div>
      </div>
      <div id="navBottom">
        <div id="buttonAddWord">NO</div>
        <div id="buttonCountWord">0</div>
        <div id="buttonNextWord">OK</div>
      </div>
      <div id="achievement40Words"></div>
      <div id="navModes">
        <div id="buttonMode1">1 words</div>
        <div id="buttonMode2">2 words</div>
        <div id="buttonMode3">3 question</div>
        <div id="buttonMode4">4 phrase</div>
        <div id="buttonMode5">5 verbs</div>
        <div id="buttonMode6">6 text</div>
        <div id="buttonMode7">7 CELPIP</div>
        <div id="buttonMode8">8 CELPIP txt</div>
      </div>
    </div>
    <script>
      // Arrays
      const arrayAllWordsOrig = [
        ["be", "би", "быть"],
        ["was", "воз", "был"],
        ["were", "вЭа", "были"],
        ["bring", "бринг", "принеси"],
        ["buy", "бай", "купить"],
        ["call", "кол", "звонить"],
        ["cost", "кост", "стоить"],
        ["do", "ду", "делать"],
        ["dream", "дрим", "мечтать"],
        ["drink", "дринк", "пить"],
        ["drive", "драйв", "водить"],
        ["eat", "ит", "кушать"],
        ["feel", "фил", "чувствовую"],
        ["forget", "фогЭт", "забыть"],
        ["get", "гэт", "получить"],
        ["give", "гив", "дать"],
        ["have", "хэв", "иметь"],
        ["know", "нОу", "знать"],
        ["learn", "лёрн", "учусь"],
        ["make", "мэйк", "сделать"],
        ["meet", "мит", "встречаю"],
        ["pay", "пэй", "платить"],
        ["play", "плэй", "играть"],
        ["read", "рид", "читать"],
        ["see", "си", "видеть"],
        ["sell", "сэл", "продать"],
        ["send", "сэнд", "слать"],
        ["sleep", "слип", "спать"],
        ["speak", "спик", "говорю"],
        ["take", "тэйк", "брать"],
        ["teach", "тич", "учить"],
        ["tell", "тэл", "скажи"],
        ["think", "синк", "думать"],
        ["try", "трай", "стараюсь"],
        ["write", "райт", "пишу"],
        ["wait", "вэйт", "ждать"],
        ["become", "бикАм", "стать"],
        ["begin", "бигИн", "начать"],
        ["choose", "чуз", "выбрать"],
        ["come", "кам", "приходи"],
        ["find", "файнд", "найти"],
        ["dryer", "дрАер", "сушилка"],
        ["fly", "флай", "лететь"],
        ["hear", "хИа", "слышать"],
        ["hold", "холд", "держать"],
        ["later", "лЭйтэр", "позже"],
        ["leave", "лив", "оставить"],
        ["lie", "лай", "лежать"],
        ["run", "ран", "бежать"],
        ["show", "шОу", "показать"],
        ["sit", "сит", "сидеть"],
        ["swim", "свим", "плыть"],
        ["wake up", "вЭйк ап", "проснуться"],
        ["win", "вин", "выиграть"],
        ["new", "нью", "новый"],
        ["now", "нАу", "сейчас"],
        ["high", "хай", "высокий"],
        ["old", "олд", "старый"],
        ["long", "лонг", "длинный"],
        ["little", "литл", "маленький"],
        ["best", "бэст", "лучший"],
        ["right", "райт", "правильно"],
        ["only", "Онли", "только"],
        ["low", "лОу", "низкий"],
        ["early", "Ёрли", "рано"],
        ["late", "лЭйт", "поздно"],
        ["hard", "хард", "жесткий"],
        ["strong", "стронг", "сильный"],
        ["free", "фри", "свободный"],
        ["full", "фул", "полный"],
        ["recently", "рИсэнтли", "недавно"],
        ["open", "Оупн", "открыть"],
        ["wrong", "ронг", "неправильно"],
        ["similar", "сИмилар", "похожий"],
        ["hot", "хот", "горячий"],
        ["happy", "хЭпи", "счастлив"],
        ["ready", "рЭди", "готовый"],
        ["dark", "дарк", "темный"],
        ["cold", "колд", "холодный"],
        ["main", "мэйн", "главный"],
        ["huge", "хьюдж", "огромный"],
        ["everything", "Эврисинг", "всё"],
        ["nothing", "нАсинг", "ничего"],
        ["every", "Эври", "каждый"],
        ["thing", "синг", "вещь"],
        ["all", "ол", "все"],
        ["happen", "хЭпн", "случается"],
        ["thread", "трэд", "нить"],
        ["item", "Айтэм", "предмет"],
        ["slow", "слОу", "медленный"],
        ["fast", "фаст", "быстро"],
        ["sure", "шУа", "конечно"],
        ["already", "олрЭди", "уже"],
        ["yet", "йЕт", "еще"],
        ["ask", "аск", "спросить"],
        ["spend", "спэнд", "тратить"],
        ["change", "чейндж", "менять"],
        ["move", "мув", "двигать"],
        ["enjoy", "энджОй", "наслаждаться"],
        ["sometimes", "самтАймс", "иногда"],
        ["must", "маст", "должен"],
        ["want", "вОнт", "хотеть"],
        ["need", "нид", "нужно"],
        ["week", "вик", "неделя"],
        ["month", "манс", "месяц"],
        ["hour", "Ауэр", "час"],
        ["price", "прайс", "цена"],
        ["agree", "эгрИ", "согласиться"],
        ["look for", "лук фор", "искать"],
        ["funny", "фАни", "забавный"],
        ["fine", "файн", "хорошо"],
        ["feed", "фид", "кормить"],
        ["break", "брэйк", "разбить"],
        ["anytime", "энитАйм", "в любое время"],
        ["catch", "кэч", "поймать"],
        ["use", "юз", "использую"],
        ["never", "нЭвэр", "никогда"],
        ["schedule", "скЭджл", "график"],
        ["believe", "билИв", "верить"],
        ["seem", "сим", "кажется"],
        ["continue", "контИнью", "продолжать"],
        ["offer", "Офэр", "предлагать"],
        ["stay", "стэй", "останься"],
        ["carry", "кЭри", "нести"],
        ["walk", "вок", "гулять"],
        ["different", "дИфэрэнт", "разный"],
        ["expensive", "икспЭнсив", "дорогой"],
        ["flat", "флэт", "плоский"],
        ["half", "хаф", "половина"],
        ["cucumber", "кьЮкабмэр", "огурец"],
        ["pickle", "пИкл", "мариновать"],
      ];

      const arrayLvl2Words = [
        ["abruptly", "эбрАптли", "внезапно"],
        ["adverse", "Эдвёрс", "неблагоприятный"],
        ["apparently", "апЭрэнтли", "видимо"],
        ["apprehension", "априхЭншн", "опасение"],
        ["astonishing", "астОнишинг", "удивительный"],
        ["bargain", "бАргэн", "сделка"],
        ["bowels", "бАуэлс", "недра"],
        ["brittle", "бритл", "хрупкий"],
        ["cease", "сиз", "прекращать"],
        ["claim", "клэйм", "заявить"],
        ["conscience", "кОншэнс", "совесть"],
        ["contempt", "кантЭмпт", "презрение"],
        ["conviction", "канвИкшн", "убеждение"],
        ["culprit", "кАлприт", "виновник"],
        ["deft", "дэфт", "ловкий"],
        ["dignity", "дИгнити", "достоинство"],
        ["dour", "дАуэр", "мрачный"],
        ["elaborate", "илАбэрэт", "подробный"],
        ["embarrass", "имбЭрэс", "смущать"],
        ["encounter", "инкАунтэр", "сталкиваться с"],
        ["fascinating", "фАсинэйтинг", "захватывающий"],
        ["finicky", "фИники", "привередливый"],
        ["frantic", "фрЭнтик", "безумный"],
        ["grim", "грим", "мрачный"],
        ["grin", "грин", "усмешка"],
        ["grope", "грОуп", "шарить"],
        ["guile", "гайл", "хитрость"],
        ["hence", "хэнс", "следовательно"],
        ["hiss", "хисс", "шипение"],
        ["huddle", "хадл", "толпиться"],
        ["husky", "хАски", "хриплый"],
        ["leisure", "лИжэр", "досуг"],
        ["morose", "морОус", "угрюмый"],
        ["mutter", "мАтэр", "бормотать"],
        ["nasty", "нЭсти", "мерзкий"],
        ["neat", "нит", "аккуратный"],
        ["numb", "нам", "онемевший"],
        ["orchard", "Орчэрд", "фруктовый сад"],
        ["plausible", "плОзибл", "правдоподобный"],
        ["profound", "профАунд", "глубокие (знания)"],
        ["quarrel", "куОрэл", "ссора"],
        ["refute", "рифьЮт", "опровергать"],
        ["reluctant", "рилАктэнт", "неохотный"],
        ["remnant", "рЭмнант", "остаток"],
        ["resemble", "ризЭмбл", "походить"],
        ["ruddy", "рАди", "румяный"],
        ["rueful", "руфл", "печальный"],
        ["scarcely", "скЭрсли", "едва"],
        ["scrutiny", "скрУтэни", "внимательное изучение"],
        ["seize", "", "схватить"],
        ["seldom", "", "редко"],
        ["shudder", "шАдэр", "вздрагивать"],
        ["sinister", "сИнистэр", "зловещий"],
        ["sombre", "сОмбэр", "хмурый"],
        ["startled", "стАртэлт", "испуганный"],
        ["tamper", "тЭмпэр", "вмешаться (подделать)"],
        ["temper", "тЭмпэр", "характер"],
        ["tempt", "тЭмпт", "искушать"],
        ["temptation", "", "искушение"],
        ["trite", "трайт", "банальный"],
        ["unbearable", "анбЭрэбл", "невыносимый"],
        ["vague", "вэйг", "расплывчатый"],
        ["virtually", "вЁрчили", "практически"],
        ["voluntary", "вАлэнтэри", "добровольный"],
        ["pledge", "плэдж", "обязуется"],
        ["tempest", "тЭмпэст", "буря"],
        ["downplay", "", "преуменьшать"],
        ["robust", "робАст", "надежный"],
        ["vicious", "вИшэз", "злобный"],
        ["haunted", "хАнтэд", "с привидениями"],
        ["reckoning", "рЭкэнинг", "расплата"],
        ["deliberate", "дилИбэрэт", "умышленный"],
        ["sever", "сЭвэр", "разорвать"],
        ["severed", "сЭвэрд", "отделенный"],
        ["severe", "сивИр", "суровый"],
        ["akin to", "экИн", "наподобие"],
        ["prejudice", "прЭджэдис", "предвзятость"],
        ["argue", "Аргью", "утверждать"],
        ["stand out", "стэнд Аут", "выделяться"],
        ["counterparts", "кАунтэрпарт", "коллеги"],
        ["complementary", "камплимЭнтари", "дополняющий"],
        ["amid", "эмИд", "на фоне"],
        ["embed", "имбЭд", "встроить"],
        ["peculiar", "пикьЮлиар", "своеобразный"],
        ["height", "хАйт", "высота, рост"],
        ["concise", "кансАйс", "краткий"],
        ["redundant", "ридАндэнт", "излишний"],
        ["raised", "рЭйзд", "вырощен (воспитан)"],
        ["expelled", "икспЭлд", "изгнан"],
        ["humble", "хАмбэл", "смиренный"],
        ["hilarious", "хилЭриэс", "уморительный"],
        ["peril", "пЭрил", "угроза"],
        ["perish", "пЭриш", "погибать"],
        ["suspense", "саспЭнс", "напряжение (ожидание)"],
        ["violate", "вАялэйт", "нарушать"],
        ["ravage", "рЭвэдж", "опустошать (разорять)"],
        ["ravish", "рЭвиш", "восхитить (аним)"],
        ["intricate", "Интрикэт", "замысловатый"],
        ["obnoxious", "эбнОкшэс", "неприятный"],
        ["restrain", "ристрЭйн", "сдерживать"],
        ["endure", "эндЁр", "выдержать"],
        ["streak", "стрик", "полоса (удач)"],
        ["trope", "трОуп", "прием (клише)"],
        ["contradiction", "контрэдИкшн", "противоречие"],
        ["mislead", "мислИд", "ввести в заблуждение"],
        ["gradually", "грЭджюали", "постепенно"],
        ["legitimate", "лэджИтимэт", "законный"],
        ["alleged", "алЭджд", "предполагаемый"],
        ["allegedly", "алЭджидли", "якобы"],
        ["comprehend", "кАмприхэнд", "постичь"],
        ["compassion", "кампЭшн", "сострадание"],
        ["predominantly", "придОминэнтли", "преимущественно"],
        ["distinct", "дистИнкт", "различный"],
      ];

      const arrayCelpipWords = [
        ["diagonal", "empty", "empty"],
        ["pollution", "empty", "empty"],
        ["accommodations", "empty", "empty"],
        ["diamond", "empty", "empty"],
        ["indifferent", "empty", "empty"],
        ["potential", "empty", "empty"],
        ["accomplishment", "empty", "empty"],
        ["industry", "empty", "empty"],
        ["poverty", "empty", "empty"],
        ["acquaintance", "empty", "empty"],
        ["discipline", "empty", "empty"],
        ["infection", "empty", "empty"],
        ["practical", "empty", "empty"],
        ["activist", "empty", "empty"],
        ["distant", "empty", "empty"],
        ["infer", "empty", "empty"],
        ["predict", "empty", "empty"],
        ["acute", "empty", "empty"],
        ["divorce", "empty", "empty"],
        ["inflation", "empty", "empty"],
        ["professional", "empty", "empty"],
        ["ambition", "empty", "empty"],
        ["earnings", "empty", "empty"],
        ["insomnia", "empty", "empty"],
        ["promotion", "empty", "empty"],
        ["analyze", "empty", "empty"],
        ["economy", "empty", "empty"],
        ["interpret", "empty", "empty"],
        ["prompt", "empty", "empty"],
        ["ecosystem", "empty", "empty"],
        ["invention", "empty", "empty"],
        ["public", "empty", "empty"],
        ["antibiotics", "empty", "empty"],
        ["ecstatic", "empty", "empty"],
        ["pulse", "empty", "empty"],
        ["anxious", "empty", "empty"],
        ["education", "empty", "empty"],
        ["qualified", "empty", "empty"],
        ["arrogant", "empty", "empty"],
        ["effect", "empty", "empty"],
        ["rectangle", "empty", "empty"],
        ["assess", "empty", "empty"],
        ["elaborate", "empty", "empty"],
        ["relatives", "empty", "empty"],
        ["elections", "empty", "empty"],
        ["jealous", "empty", "empty"],
        ["reserve", "empty", "empty"],
        ["audio", "empty", "empty"],
        ["journey", "empty", "empty"],
        ["resort", "empty", "empty"],
        ["backspace", "empty", "empty"],
        ["employee", "empty", "empty"],
        ["keyboard", "empty", "empty"],
        ["resources", "empty", "empty"],
        ["bacteria", "empty", "empty"],
        ["landlord", "empty", "empty"],
        ["response", "empty", "empty"],
        ["bashful", "empty", "empty"],
        ["engaged", "empty", "empty"],
        ["layover", "empty", "empty"],
        ["right-click", "empty", "empty"],
        ["schedule", "empty", "empty"],
        ["beard", "empty", "empty"],
        ["enter", "empty", "empty"],
        ["left-click", "empty", "empty"],
        ["scroll wheel", "empty", "empty"],
        ["bias", "empty", "empty"],
        ["liberal", "empty", "empty"],
        ["scruffy", "empty", "empty"],
        ["botany", "empty", "empty"],
        ["evaluation", "empty", "empty"],
        ["lonely", "empty", "empty"],
        ["shift", "empty", "empty"],
        ["broadcast", "empty", "empty"],
        ["malfunction", "empty", "empty"],
        ["sightseeing", "empty", "empty"],
        ["button", "empty", "empty"],
        ["excursion", "empty", "empty"],
        ["mechanism", "empty", "empty"],
        ["square", "empty", "empty"],
        ["campsite", "empty", "empty"],
        ["executive", "empty", "empty"],
        ["medical", "empty", "empty"],
        ["star", "empty", "empty"],
        ["cancer", "empty", "empty"],
        ["exhausted", "empty", "empty"],
        ["stock-y", "empty", "empty"],
        ["candidate", "empty", "empty"],
        ["experiment", "empty", "empty"],
        ["mentor", "empty", "empty"],
        ["strained", "empty", "empty"],
        ["capacity", "empty", "empty"],
        ["extinction", "empty", "empty"],
        ["metabolism", "empty", "empty"],
        ["striped", "empty", "empty"],
        ["cautious", "empty", "empty"],
        ["fauna", "empty", "empty"],
        ["miserly", "empty", "empty"],
        ["subjective", "empty", "empty"],
        ["checkered", "empty", "empty"],
        ["fiance", "empty", "empty"],
        ["monitor", "empty", "empty"],
        ["substance", "empty", "empty"],
        ["chronic", "empty", "empty"],
        ["flora", "empty", "empty"],
        ["motorboat", "empty", "empty"],
        ["summarize", "empty", "empty"],
        ["chubby", "empty", "empty"],
        ["foolish", "empty", "empty"],
        ["mouse", "empty", "empty"],
        ["summit", "empty", "empty"],
        ["circle", "empty", "empty"],
        ["furious", "empty", "empty"],
        ["moustache", "empty", "empty"],
        ["supervisor", "empty", "empty"],
        ["clever", "empty", "empty"],
        ["generalize", "empty", "empty"],
        ["muscle", "empty", "empty"],
        ["surprised", "empty", "empty"],
        ["close", "empty", "empty"],
        ["generous", "empty", "empty"],
        ["muscular", "empty", "empty"],
        ["sympathetic", "empty", "empty"],
        ["cognition", "empty", "empty"],
        ["geology", "empty", "empty"],
        ["nauseating", "empty", "empty"],
        ["synthetic", "empty", "empty"],
        ["coherence", "empty", "empty"],
        ["gist", "empty", "empty"],
        ["neighbour", "empty", "empty"],
        ["tab", "empty", "empty"],
        ["colleague", "empty", "empty"],
        ["global", "empty", "empty"],
        ["tanned", "empty", "empty"],
        ["commute", "empty", "empty"],
        ["gloomy", "empty", "empty"],
        ["nutrients", "empty", "empty"],
        ["tattoos", "empty", "empty"],
        ["compare", "empty", "empty"],
        ["gorgeous", "empty", "empty"],
        ["objective", "empty", "empty"],
        ["tenant", "empty", "empty"],
        ["conduct", "empty", "empty"],
        ["government", "empty", "empty"],
        ["obstacle", "empty", "empty"],
        ["theory", "empty", "empty"],
        ["confident", "empty", "empty"],
        ["guilty", "empty", "empty"],
        ["optimistic", "empty", "empty"],
        ["thermometer", "empty", "empty"],
        ["conservative", "empty", "empty"],
        ["handsome", "empty", "empty"],
        ["organism", "empty", "empty"],
        ["toxic", "empty", "empty"],
        ["contrast", "empty", "empty"],
        ["headset", "empty", "empty"],
        ["outgoing", "empty", "empty"],
        ["triangle", "empty", "empty"],
        ["courageous", "empty", "empty"],
        ["heart", "empty", "empty"],
        ["outline", "empty", "empty"],
        ["cowardly", "empty", "empty"],
        ["horizontal", "empty", "empty"],
        ["overweight", "empty", "empty"],
        ["unbalanced", "empty", "empty"],
        ["culture", "empty", "empty"],
        ["horrified", "empty", "empty"],
        ["partner", "empty", "empty"],
        ["underweight", "empty", "empty"],
        ["cursor", "empty", "empty"],
        ["humble", "empty", "empty"],
        ["passengers", "empty", "empty"],
        ["variable", "empty", "empty"],
        ["hypothesize", "empty", "empty"],
        ["persuade", "empty", "empty"],
        ["vertical", "empty", "empty"],
        ["delete", "empty", "empty"],
        ["idealistic", "empty", "empty"],
        ["pessimistic", "empty", "empty"],
        ["withdrawn", "empty", "empty"],
        ["demonstrate", "empty", "empty"],
        ["pimples", "empty", "empty"],
        ["wrinkles", "empty", "empty"],
        ["deplete", "empty", "empty"],
        ["plaid", "empty", "empty"],
        ["zigzag", "empty", "empty"],
        ["destination", "empty", "empty"],
        ["immigration", "empty", "empty"],
        ["plain", "empty", "empty"],
        ["determined", "empty", "empty"],
        ["impact", "empty", "empty"],
        ["polka-dot", "empty", "empty"],
      ];

      const arrayCelpipTexts = [
        ["When students do not know the definition of a word, they can infer the meaning from the context of the Sentence.", "empty"],
        ["Sammy did not understand the results from his lab experiment, so his partner interpreted the meaning of the results to him.", "empty"],
        ["After reviewing his class notes, Mohammed predicted some questions that he thought would be on the exam.", "empty"],
        ["Miss Atkins liked the class's idea about having a party on their last day of school and asked her students to elaborate on the details of the event.", "empty"],
        ["Mina outlined the most important points that would be on the test.", "empty"],
        ["Thiago compared his last Listening Test results with his current ones and realized that he had Improved.", "empty"],
        ["Mariam learned the contrast between 'p' and 'b' sounds, as in 'pack' and 'back,' in her English class.", "empty"],
        ["At first Camila's parents were reluctant to let her join an afterschool English class, but she was able to persuade them eventually.", "empty"],
        ["The teacher demonstrated to her English class a way to change a statement into a question.", "empty"],
        ["Ben generalized that taking notes in class would help all students improve their grade because it helped him.", "empty"],
        ["Marc assesses his students' performance based on their class participation and test scores.", "empty"],
        ["Emma forgot to do her reading homework so she asked her classmate to summarize the reading for her before class started.", "empty"],
        ["Edward was feeling sleepy in class so he did not hear most of the lesson, but he got the gist of what the teacher said.", "empty"],
        ["Althea asked her class a question, but there was no response. The class was shy.", "empty"],
        ["Daniel could not understand anything his classmate, Shirley, was telling him because there was no coherence in the things she said.", "empty"],
        ["After failing her English test, Barbara felt very gloomy and locked herself in her room, refusing to eat dinner.", "empty"],
        ["Sakura was furious when she heard someone throw a rock at her window and break it.", "empty"],
        ["John was ecstatic when he heard he was getting a very big promotion at work.", "empty"],
        ["Terry felt confident about passing all her tests because she knew she was well-prepared.", "empty"],
        ["Chloe is always cautious about sharing personal information online and never reveals her address or phone number.", "empty"],
        ["Laura was indifferent about whether her little brother played basketball well. She didn't think it mattered as long as he was happy.", "empty"],
        ["Lionel is usually very quiet in class. He rarely talks to others first because he feels bashful.", "empty"],
        ["Heidi felt very lonely when she was home alone and had no one to talk to.", "empty"],
        ["Walter didn't feel angry when Jasmine threw a tantrum. He felt sympathetic because he knew Jasmine was upset about her recent divorce.", "empty"],
        ["Edmond was horrified when he came home and discovered that someone had broken into his apartment.", "empty"],
        ["While his sister was away, Miguel accidentally broke her computer. He felt terribly guilty and immediately bought her a new one.", "empty"],
        ["Carmen was pleasantly surprised when her husband came home with a bouquet of flowers for her.", "empty"],
        ["Malak was exhausted from working one full-time job and two part-time jobs to support her family of five.", "empty"],
        ["Aiden was jealous of his little brother because he thought that his parents loved his brother more than they loved him.", "empty"],
        ["Julie felt very anxious the day before her final exam because she hadn't studied at all.", "empty"],
        ["Some people study botany to learn about plants and how they support life on earth.", "empty"],
        ["An unwanted by-product of many industries is toxic waste, because it runs into oceans and rivers and damages the environment.", "empty"],
        ["Cars consume gasoline and produce carbon dioxide that depletes the ozone layer, creating holes in the atmosphere.", "empty"],
        ["Water pollution, such as oil spills, negatively affect organisms that live in the ocean.", "empty"],
        ["Dinosaurs were the primary animals on earth for millions of years, but they reached extinction long ago.", "empty"],
        ["Water is one of our most precious natural resources and must be used wisely.", "empty"],
        ["Climate change has global effects that influence many countries around the world.", "empty"],
        ["Dad loves African fauna, particularly giraffes.", "empty"],
      ];

      const arrayVerbWords = [
        ["awake", "awoke", "awoken", "проснуться"],
        ["be", "was, were", "been", "быть"],
        ["beat", "beat", "beaten", "бить"],
        ["become", "became", "become", "стать"],
        ["begin", "began", "begun", "начать"],
        ["bend", "bent", "bent", "гнуть"],
        ["bite", "bit", "bitten", "кусать"],
        ["blow", "blew", "blown", "дуть"],
        ["break", "broke", "broken", "ломать"],
        ["bring", "brought", "brought", "принести"],
        ["broadcast", "broadcast", "broadcast", "транслировать"],
        ["build", "built", "built", "строить"],
        ["burn", "burned", "burned", "жечь"],
        ["buy", "bought", "bought", "купить"],
        ["catch", "caught", "caught", "ловить"],
        ["choose", "chose", "chosen", "выбрать"],
        ["come", "came", "come", "прихожу"],
        ["cost", "cost", "cost", "стоить"],
        ["cut", "cut", "cut", "резать"],
        ["deal", "dealt", "dealt", "иметь дело с"],
        ["dig", "dug", "dug", "копать"],
        ["do", "did", "done", "делать"],
        ["draw", "drew", "drawn", "рисовать"],
        ["dream", "dreamed", "dreamed", "мечтать"],
        ["drink", "drank", "drunk", "пить"],
        ["drive", "drove", "driven", "водить авто"],
        ["eat", "ate", "eaten", "кушать"],
        ["fall", "fell", "fallen", "падать"],
        ["feed", "fed", "fed", "кормить"],
        ["feel", "felt", "felt", "чувствовать"],
        ["fight", "fought", "fought", "драться"],
        ["find", "found", "found", "найти"],
        ["flee", "fled", "fled", "сбежать"],
        ["fly", "flew", "flown", "летать"],
        ["forbid", "forbade", "forbidden", "запрещать"],
        ["forget", "forgot", "forgotten", "забыть"],
        ["forgive", "forgave", "forgiven", "простить"],
        ["freeze", "froze", "frozen", "заморозить"],
        ["get", "got", "gotten", "получить"],
        ["give", "gave", "given", "дать"],
        ["go", "went", "gone", "идти"],
        ["grow", "grew", "grown", "рости"],
        ["have", "had", "had", "иметь"],
        ["hear", "heard", "heard", "слышать"],
        ["hide", "hid", "hidden", "прятать"],
        ["hold", "held", "held", "держать в руке"],
        ["keep", "kept", "kept", "держать при себе"],
        ["knit", "knitted", "knitted", "вязать"],
        ["know", "knew", "known", "знаю"],
        ["lead", "led", "led", "вестИ"],
        ["learn", "learned", "learned", "учиться"],
        ["leave", "left", "left", "оставить"],
        ["lend", "lent", "lent", "одолжить"],
        ["let", "let", "let", "позволь"],
        ["lie", "lay", "lain", "лежать"],
        ["make", "made", "made", "делать"],
        ["mean", "meant", "meant", "значит"],
        ["meet", "met", "met", "встретить"],
        ["pay", "paid", "paid", "платить"],
        ["put", "put", "put", "класть"],
        ["quit", "quit", "quit", "выйти / бросить"],
        ["read", "read", "read", "читать"],
        ["ring", "rang", "rung", "звонить"],
        ["run", "ran", "run", "бежать"],
        ["saw", "sawed", "sawed", "пилить"],
        ["say", "said", "said", "сказать"],
        ["see", "saw", "seen", "видеть"],
        ["sell", "sold", "sold", "продать"],
        ["send", "sent", "sent", "послать"],
        ["set", "set", "set", "установить"],
        ["shake", "shook", "shaken", "трясти"],
        ["shine", "shone", "shone", "сиять"],
        ["shoot", "shot", "shot", "стрелять"],
        ["sing", "sang", "sung", "петь"],
        ["sink", "sank", "sunk", "тонуть"],
        ["sit", "sat", "sat", "сидеть"],
        ["sleep", "slept", "slept", "спать"],
        ["smell", "smelled", "smelled", "пахнуть"],
        ["speak", "spoke", "spoken", "говорить"],
        ["spend", "spent", "spent", "тратить"],
        ["spin", "spun", "spun", "вращать"],
        ["spit", "spat", "spat", "плевать"],
        ["split", "split", "split", "разделить"],
        ["spoil", "spoiled", "spoiled", "портить"],
        ["stink", "stank", "stunk", "вонять"],
        ["swim", "swam", "swum", "плыть"],
        ["take", "took", "taken", "взять"],
        ["teach", "taught", "taught", "научить"],
        ["tear", "tore", "torn", "порвать"],
        ["tell", "told", "told", "рассказать"],
        ["think", "thought", "thought", "думать"],
        ["throw", "threw", "thrown", "кинуть"],
        ["understand", "understood", "understood", "понять"],
        ["unfreeze", "unfroze", "unfrozen", "разморозить"],
        ["upset", "upset", "upset", "огорчить"],
        ["wake", "woke", "woken", "будить"],
        ["wear", "wore", "worn", "носить одежду"],
        ["win", "won", "won", "выиграть"],
        ["write", "wrote", "written", "пишу"],
      ];

      const arrayWaitlist = [
        ["abide", "abided", "abided", "word4"],
        ["arise", "arose", "arisen", "word4"],
        ["bear", "bore", "born", "word4"],
        ["bet", "bet", "bet", "word4"],
        ["bid", "bid", "bid", "word4"],
        ["bleed", "bled", "bled", "word4"],
        ["burst", "burst", "burst", "word4"],
        ["cast", "cast", "cast", "word4"],
        ["cling", "clung", "clung", "word4"],
        ["creep", "crept", "crept", "word4"],
        ["fling", "flung", "flung", "word4"],
        ["hang", "hung", "hung", "word4"],
        ["hit", "hit", "hit", "word4"],
        ["hurt", "hurt", "hurt", "word4"],
        ["kneel", "kneeled", "kneeled", "word4"],
        ["lay", "laid", "laid", "word4"],
        ["lean", "leaned", "leaned", "word4"],
        ["leap", "leaped", "leaped", "word4"],
        ["light", "lit", "lit", "word4"],
        ["lose", "lost", "lost", "word4"],
        ["mistake", "mistook", "mistaken", "word4"],
        ["mow", "mowed", "mowed", "word4"],
        ["overcome", "overcame", "overcome", "word4"],
        ["partake", "partook", "partaken", "word4"],
        ["ride", "rode", "ridden", "word4"],
        ["rise", "rose", "risen", "word4"],
        ["sew", "sewed", "sewn", "word4"],
        ["shear", "sheared", "shorn", "word4"],
        ["shrink", "shrank", "shrunk", "word4"],
        ["shut", "shut", "shut", "word4"],
        ["slay", "slew", "slain", "word4"],
        ["slide", "slid", "slid", "word4"],
        ["sling", "slung", "slung", "word4"],
        ["slink", "slunk", "slunk", "word4"],
        ["slit", "slit", "slit", "word4"],
        ["smite", "smote", "smitten", "word4"],
        ["sow", "sowed", "sown", "word4"],
        ["speed", "sped", "sped", "word4"],
        ["spill", "spilled", "spilled", "word4"],
        ["spread", "spread", "spread", "word4"],
        ["spring", "sprang", "sprung", "word4"],
        ["stand", "stood", "stood", "word4"],
        ["sting", "stung", "stung", "word4"],
        ["stride", "strode", "stridden", "word4"],
        ["strike", "struck", "struck", "word4"],
        ["string", "strung", "strung", "word4"],
        ["strive", "strove", "striven", "word4"],
        ["sublet", "sublet", "sublet", "word4"],
        ["swing", "swung", "swung", "word4"],
        ["thrust", "thrust", "thrust", "word4"],
        ["tread", "trod", "trodden", "word4"],
        ["unbind", "unbound", "unbound", "word4"],
        ["undo", "undid", "undone", "word4"],
        ["uphold", "upheld", "upheld", "word4"],
        ["weave", "wove", "woven", "word4"],
        ["weep", "wept", "wept", "word4"],
        ["wind", "wound", "wound", "word4"],
        ["withdraw", "withdrew", "withdrawn", "word4"],
        ["withstand", "withstood", "withstood", "word4"],
        ["wring", "wrung", "wrung", "word4"],
      ];

      const arrayQuestionWords = [
        ["how many", "хАу мЭни", "сколько (исч)"],
        ["how much", "хАу мач", "сколько"],
        ["what for", "ват фор", "зачем"],
        ["when", "вэн", "когда"],
        ["where", "вЭа", "где, куда"],
        ["who", "ху", "кто"],
        ["why", "вай", "почему"],
        ["what", "ват", "что"],
        ["which", "уИч", "который"],
        ["how", "хАу", "как"],
        ["whose", "хуз", "чей"],
      ];

      const arrayLongWords = [
        ["Я ищу автобусную остановку. Скажите пожалуйста где она?"],
        ["Можно посмотреть ту коричневую сумку пожалуйста?"],
        ["Сколько стоит этот пиджак?"],
        ["Отлично, наконец-то пятница. Время идти домой."],
        ["Сколько остановок до 11-й авеню?"],
        ["Скажите мне пожалуйста когда мы прибываем в Монреаль?"],
        ["Мне нужен билет на сегодня, где я могу купить его?"],
        ["Извини, я тебя не расслышал. Скажи снова пожалуйста."],
        ["Могу я спросить у вас что-то? Как называется это дерево?"],
        ["Спасибо за информацию."],
        ["Я учу английский каждый день, но не на уикенд."],
        ["Я согласна. Первый сезон этого тв шоу был лучший."],
        ["Я недавно поменяла нитки от белой к зеленой. Все работает хорошо."],
        ["Я могу отнести коробку в комнату завтра или сейчас."],
        ["Клиент ждет тебя возле кухни."],
        ["Я оставлю это здесь, ты можешь брать в любое время."],
        ["Каждое утро я делаю зарядку, потом завтракаю и начинаю работать."],
        ["После работы я люблю отдыхать дома, смотреть фильмы или читать книги."],
        ["В выходные стараюсь гулять в парке или ездить за город с друзьями."],
        ["В детстве каждое лето проводил у бабушки в деревне, это было чудесно."],
        ["В поездке по Европе мне особенно запомнились узкие улицы."],
        ["Если будет возможность, я хочу посетить Японию и увидеть цветущую сакуру."],
        ["Перед путешествием я всегда планирую маршрут и бронирую отели заранее."],
        ["В Италии мы арендовали машину и ездили по маленьким городам, это было здорово."],
        ["Я увлекаюсь фотографией и люблю запечатлевать красивые моменты жизни."],
        ["В свободное время я играю на гитаре и сочиняю музыку, это меня расслабляет."],
        ["В юности я собирал марки, у меня была большая коллекция."],
        ["В будущем я планирую выучить несколько иностранных языков, это моя цель."],
        ["Я мечтаю открыть свой собственный бизнес и приносить пользу людям."],
        ["Летом я буду много путешествовать и заниматься любимыми хобби, это мои планы."],
      ];

      const arrayPhrases = [
        ["you look great", "ты выглядишь хорошо"],
        ["what a coincidence", "какое совпадение (коИнсидэнс)"],
        ["that's great", "отлично"],
        ["good for you", "ты молодец"],
        ["you won't believe this", "ты не поверишь (билИв)"],
        ["that's terrible", "это ужасно (тЭрибл)"],
        ["you too", "тебе тоже"],
        ["me too", "я тоже"],
        ["have fun", "веселись получай удовольствие"],
        ["have a good day", "хорошего дня"],
        ["have a great weekend", "хорошего уикенда"],
        ["have a nice evening", "хорошего вечера"],
        ["sounds good", "звучит хорошо (сАундс)"],
        ["you are welcome", "пожалуйста (вЭлкам)"],
        ["likewise", "взаимно (лАйквайз)"],
        ["same for me", "у меня тоже самое (сэйм)"],
        ["never mind", "неважно. не бери в голову (нэвэмАйнд)"],
        ["do you mind?", "не возражаешь? (майнд)"],
        ["look at me", "посмотри на меня"],
        ["please give it to me", "пожалуйста дайте это мне"],
        ["i speak english a little bit", "я немного говорю по английски (бит)"],
        ["come here", "иди сюда"],
        ["i am sorry but i can't", "извините но я не могу (кэнт)"],
        ["with pleasure", "с удовольствием (плЭжа)"],
        ["don't worry", "не волнуйтесь (вОри)"],
        ["i can't remember", "я не могу вспомнить (римЭмбэр)"],
        ["who did this?", "кто это сделал?"],
        ["see you later", "увидимся позже (лЭйтэр)"],
        ["that's not right", "это не правильно"],
        ["could you repeat that?", "не могли бы вы повторить? (рипИт)"],
        ["how much is this?", "сколько это стоит?"],
        ["no, thank you", "нет спасибо"],
        ["i want to go with you", "я хочу пойти с тобой"],
        ["here you are", "вот, возьмите (хИа)"],
        ["i like to eat fruit", "я люблю есть фрукты"],
        ["have a good time", "желаю хорошо провести время"],
        ["nothing special", "ничего особенного (спэшл)"],
        ["in the morning", "утром"],
        ["to say the least", "мягко говоря"],
      ];

      // Create a deep copy
      const arrayAllWords = structuredClone(arrayAllWordsOrig);

      // Fisher-Yates shuffle algorithm
      function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]];
        }
      }

      window.speechSynthesis.getVoices(); // Preload TTS voices

      // Store references to the elements in variables
      const body = document.querySelector("body");
      const wrap = document.getElementById("wrap");
      const buttonNav = document.getElementById("buttonNav");
      const navModes = document.getElementById("navModes");
      const div1Wrap = document.getElementById("div1");
      const div3Wrap = document.getElementById("div3");
      const navTop = document.getElementById("navTop");
      const div1 = document.querySelector("#div1 span");
      const div2 = document.querySelector("#div2 span");
      const div3 = document.querySelector("#div3 span");
      const htmlEntirePage = document.querySelector("html");
      const navBottom = document.getElementById("navBottom");
      const vocabulary = document.getElementById("vocabulary");
      const buttonMode1 = document.getElementById("buttonMode1");
      const buttonMode2 = document.getElementById("buttonMode2");
      const buttonMode3 = document.getElementById("buttonMode3");
      const buttonMode4 = document.getElementById("buttonMode4");
      const buttonMode5 = document.getElementById("buttonMode5");
      const buttonMode6 = document.getElementById("buttonMode6");
      const buttonMode7 = document.getElementById("buttonMode7");
      const buttonMode8 = document.getElementById("buttonMode8");
      const buttonReverse = document.getElementById("buttonReverse");
      const buttonAddWord = document.getElementById("buttonAddWord");
      const buttonDownload = document.getElementById("buttonDownload");
      const buttonNextWord = document.getElementById("buttonNextWord");
      const buttonCountWord = document.getElementById("buttonCountWord");
      const achievement40Words = document.getElementById("achievement40Words");
      const buttonShowTranslation = document.getElementById("buttonShowTranslation");

      let arrayMini = [];
      let indexMini = 0;
      let indexOfCurrentWord = 0;
      let arrayUnknown = [];
      const modeButtons = Array.from(document.querySelectorAll("[id^=buttonMode]"));

      // Fetch words from new.html
      /* async function initializeArray() {
            const response = await fetch('new.html');

            const html = await response.text();
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, 'text/html');
            const table = doc.querySelector('table');
            const rows = table.querySelectorAll('tr');

            // Update the global variable directly
            arrayUnknown = Array.from(rows).map(row => {
                const cells = row.querySelectorAll('td');
                return Array.from(cells).map(cell => cell.textContent);
            });
        }

        initializeArray().then(() => {
            console.log("Data fetched:", arrayUnknown);
            // Now update your modes object here, once arrayUnknown has been populated.
            modes[7].array = arrayUnknown;
        }); */

      let modes = {
        1: {
          wordOrder: [2, 0, 1],
          showDiv: [div2, div3],
          hideDiv: [div1],
          translationDiv: [div1],
          showBtn: [buttonAddWord, buttonCountWord],
          hideBtn: [],
          array: arrayAllWords,
        },
        2: {
          wordOrder: [2, 0, 1],
          showDiv: [div2, div3],
          hideDiv: [div1],
          translationDiv: [div1],
          showBtn: [buttonAddWord, buttonCountWord],
          hideBtn: [],
          array: arrayLvl2Words,
        },
        3: {
          wordOrder: [2, 0, 1],
          showDiv: [div2, div3],
          hideDiv: [div1],
          translationDiv: [div1],
          showBtn: [],
          hideBtn: [buttonAddWord, buttonCountWord],
          array: arrayQuestionWords,
        },
        4: {
          wordOrder: [1, 0],
          showDiv: [div2],
          hideDiv: [div1, div3],
          translationDiv: [div1],
          showBtn: [],
          hideBtn: [buttonAddWord, buttonCountWord],
          array: arrayPhrases,
        },
        5: {
          wordOrder: [3, 0, 1],
          showDiv: [div2],
          hideDiv: [div1, div3],
          translationDiv: [div1],
          showBtn: [],
          hideBtn: [buttonAddWord, buttonCountWord],
          array: arrayVerbWords,
        },
        6: {
          wordOrder: [3, 0, 1],
          showDiv: [div2],
          hideDiv: [div1, div3],
          translationDiv: [],
          showBtn: [],
          hideBtn: [buttonAddWord, buttonCountWord],
          array: arrayLongWords,
        },
        7: {
          wordOrder: [2, 0, 1],
          showDiv: [div2, div3],
          hideDiv: [div1],
          translationDiv: [div1],
          showBtn: [buttonAddWord, buttonCountWord],
          hideBtn: [],
          array: arrayCelpipWords,
        },
        8: {
          wordOrder: [3, 0, 1],
          showDiv: [div2],
          hideDiv: [div1, div3],
          translationDiv: [],
          showBtn: [],
          hideBtn: [buttonAddWord, buttonCountWord],
          array: arrayCelpipTexts,
        },
      };

      let modesReverse = {
        1: {
          wordOrder: [0, 2, 1],
          showDiv: [div2],
          hideDiv: [div1, div3],
          translationDiv: [div1, div3],
        },
      };

      let currentMode = 1; // Default mode
      let currentArray = modes[currentMode].array;
      switchMode(1);

      function switchMode(mode) {
        currentMode = mode;
        currentReverseMode = false;
        currentArray = modes[currentMode].array;
        indexOfCurrentWord = 0;
        shuffle(currentArray);
        clearStyles();
        modeActiveColor(currentMode);
        divsLayout(currentMode);
      }

      // buttonMode listener
      modeButtons.forEach((button, index) => {
        button.addEventListener("click", () => {
          switchMode(index + 1);
          navModes.classList.toggle("navVisible");
        });
      });

      // Show or hide divs
      function divsLayout(currentMode, isMini) {
        modes[currentMode].showDiv.forEach(showThis);
        modes[currentMode].hideDiv.forEach(hideThis);
        modes[currentMode].showBtn.forEach(showThis);
        modes[currentMode].hideBtn.forEach(hideThis);

        if ([6, 8].includes(parseInt(currentMode))) {
          div1.classList.add("small-font");
          div2.classList.add("small-font");
          hideThis(div1Wrap);
          hideThis(div3Wrap);
        } else {
          div1.classList.remove("small-font");
          div2.classList.remove("small-font");
          showThis(div1Wrap);
          showThis(div3Wrap);
        }

        wordsLayout(currentMode, isMini);
      }

      // What word in what div
      function wordsLayout(currentMode, isMini = false) {
        let mode = modes[currentMode].wordOrder;

        let word;
        if (isMini) {
          word = arrayMini[indexMini];
        } else {
          word = currentArray[indexOfCurrentWord];
        }

        if (currentMode === 5) {
          div1.innerText = word[mode[0]];
          div2.innerText = `${word[0]}, ${word[1]}, ${word[2]}`;
          div3.innerText = word[mode[2]];
        } else {
          div1.innerText = word[mode[0]];
          div2.innerText = word[mode[1]];
          div3.innerText = word[mode[2]];
        }

        if (![3, 4, 5, 6].includes(currentMode)) {
          divsLayoutReverse(currentReverseMode, word);
        }
      }

      function divsLayoutReverse(currentReverseMode, word) {
        if (currentReverseMode) {
          modesReverse[1].showDiv.forEach(showThis);
          modesReverse[1].hideDiv.forEach(hideThis);
          [div1.innerText, div2.innerText, div3.innerText] = modesReverse[1].wordOrder.map((i) => word[i]);
        } else {
          // do nothing
        }
      }

      buttonReverse.addEventListener("click", function () {
        if (![3, 4, 5, 6].includes(currentMode)) {
          currentReverseMode = !currentReverseMode;

          buttonReverse.classList.toggle("reverseBG");
          shuffle(currentArray);
          indexMini = 0;
          indexOfCurrentWord = 0;
          buttonNextWord.innerHTML = currentArray.length;
          buttonCountWord.innerHTML = arrayMini.length;
          divsLayout(currentMode);
        }
      });

      // Show next word
      function actionNextWord(currentMode) {
        indexOfCurrentWord++;
        indexOfCurrentWord = indexOfCurrentWord % currentArray.length;
        divsLayout(currentMode);
        buttonNextWord.innerHTML = currentArray.length - indexOfCurrentWord;
      }
      buttonNextWord.addEventListener("click", function () {
        actionNextWord(currentMode);
        achieve40Words();
      });

      // Show next word in mini array
      function actionNextWordMini(currentMode) {
        indexMini++;
        indexMini = indexMini % arrayMini.length;
        divsLayout(currentMode, true);
        /*buttonCountWord.innerHTML = arrayMini.length - indexMini;*/
      }
      buttonCountWord.addEventListener("click", function () {
        if (arrayMini.length > 0) {
          actionNextWordMini(currentMode);
        }
      });

      // Add word to mini array
      function actionAddWord(currentMode) {
        let word = currentArray[indexOfCurrentWord];

        // Prevent duplicate
        if (arrayMini.includes(word)) {
          console.log("duplicate");
        } else {
          arrayMini.push(word);
        }

        buttonCountWord.innerHTML = arrayMini.length;

        for (x of arrayMini) {
          console.log(x);
        }
      }
      buttonAddWord.addEventListener("click", function () {
        actionAddWord(currentMode);

        // Download btn
        if (arrayMini.length > 0) {
          buttonDownload.style.display = "flex";
        } else {
        }
      });

      // Show translation
      function showTranslation(currentMode, currentReverseMode) {
        if (currentReverseMode === true) {
          modesReverse[1].translationDiv.forEach(showThis);
        } else {
          modes[currentMode].translationDiv.forEach(showThis);
        }
      }
      buttonShowTranslation.addEventListener("click", function () {
        showTranslation(currentMode, currentReverseMode);
      });

      // Active buttonMode color
      function modeActiveColor(currentMode) {
        buttonMode = document.getElementById(`buttonMode${currentMode}`);
        buttonMode.style.background = "#553674";
      }

      // Text to speach
      function textToSpeach(currentMode, div) {
        if ("speechSynthesis" in window) {
          const utterance = new SpeechSynthesisUtterance(div.textContent);
          if (![8].includes(parseInt(currentMode))) {
            window.speechSynthesis.speak(utterance);
          }
        }
      }
      div1.addEventListener("click", function () {
        const div = div1;
        if (/[а-яА-ЯёЁ]/.test(div1.textContent)) {
          console.log("not english text");
        } else {
          textToSpeach(currentMode, div);
        }
      });
      div2.addEventListener("click", function () {
        const div = div2;
        if (/[а-яА-ЯёЁ]/.test(div2.textContent)) {
          console.log("not english text");
        } else {
          textToSpeach(currentMode, div);
        }
      });

      // Clear styles
      function clearStyles() {
        div1.innerHTML = "";
        div2.innerHTML = "";
        div3.innerHTML = "";
        modeButtons.forEach((el) => (el.style.background = ""));
        buttonNav.innerHTML = currentMode;
        indexMini = 0;
        arrayMini.length = 0;
        currentArray.length > 0 ? (buttonNextWord.innerHTML = currentArray.length) : null;
        buttonCountWord.innerHTML = arrayMini.length;
        buttonReverse.classList.remove("reverseBG");
        hideThis(achievement40Words);
        hideThis(buttonDownload);
      }

      // Hide any element
      function hideThis(x) {
        x.style.display = "none";
      }

      // Show any element
      function showThis(x) {
        x.style.display = "";
      }

      function show40() {
        achievement40Words.style.display = "flex";
      }

      // every 40 words achievement is shown
      function achieve40Words(currentMode) {
        const wordsCount = [40, 80, 120];
        const bgColors = ["#007905", "#007279", "#ff5400"];

        wordsCount.forEach((val, i) => {
          if (indexOfCurrentWord === wordsCount[i]) {
            show40();
            achievement40Words.style.background = bgColors[i];
            achievement40Words.innerHTML = indexOfCurrentWord;
          }
        });
        if (indexOfCurrentWord < 40) {
          hideThis(achievement40Words);
        }
      }

      function downloadArrayMini() {
        if (arrayMini.length === 0) {
          alert("arrayMini is empty. Nothing to download.");
          return;
        }

        // Get current date and time for filename
        const now = new Date();
        const months = ["jan", "feb", "mar", "apr", "may", "jun", "jul", "aug", "sep", "oct", "nov", "dec"];
        const month = months[now.getMonth()];
        const day = now.getDate();
        const hours = now.getHours();
        const minutes = now.getMinutes().toString().padStart(2, "0");
        const timeFormatted = `${hours}${minutes}`;

        const fileName = `enWord_${month}${day}_${timeFormatted}.html`;

        // Generate HTML content with a table
        const htmlContent = `
            <!DOCTYPE html>
            <html lang="en">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>enWord</title>
            <style>
            body {            
                font-family: sans-serif;
                font-weight: 900;
                color: #ffffff;
                background: #291d27;
            }
            table {
                width: 100%;
                border-collapse: collapse;
            }
            th, td {
                border: 2px solid #553674;
                padding: 8px;
                text-align: center;
            }      
            </style>
            </head>
            <body>
                <h2>${month} ${day}</h2>
                <table>
                    ${arrayMini.map((item) => `<tr><td>${item[0]}</td><td>${item[1]}</td><td>${item[2]}</td></tr>`).join("")}
                </table>
            </body>
            </html>
            `;

        // Create a Blob with the HTML content
        const blob = new Blob(["\ufeff" + htmlContent], {
          type: "text/html;charset=utf-8",
        });

        // Create a link and trigger the download
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = fileName;
        a.style.display = "none";
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
      }

      // Add a button to trigger the download
      buttonDownload.addEventListener("click", downloadArrayMini);

      // Modes menu toggle
      buttonNav.addEventListener("click", function () {
        navModes.classList.toggle("navVisible");
      });
    </script>
  </body>
</html>
